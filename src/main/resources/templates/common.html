<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<div th:fragment="head" th:remove="tag">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FlyBondi</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">
    <!-- JS
    <script th:src="@{/js/nav.js}" async></script>
    <script th:src="@{/js/nav-profile.js}" async></script>
    -->

    <!-- CSS-->
    <link th:href="@{/css/nav.css}" rel="stylesheet">
    <link th:href="@{/css/librovuelo.css}" rel="stylesheet">
    <link th:href="@{/css/profile.css}" rel="stylesheet">
    <link th:href="@{/css/abm.css}" rel="stylesheet">
    <link th:href="@{/css/resumenvacaciones.css}" rel="stylesheet">
</div>

<div th:fragment="nav" th:remove="tag">

    <nav class="navbar navbar-expand-lg navbar-light p-2 shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" th:href="@{/}"><img th:src="@{/img/isologo.svg}" alt="Flybondi Isologo" id="brand-image" width="200"></a>
            <div class="hstack gap-3">
                <div class="nav-btns ms-auto"></div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-2 mt-2 mb-lg-0 mx-auto" style="gap:20px">
                        <li class="nav-item dropdown">
                            <div class="dropdown ">
                                <button class="btn btn-secondary dropdown-toggle" type="button"  id="dropdownMenuGeneral" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; border: none; color: #212529">
                                    General
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuGeneral">

    <!--                                <li> <a class="dropdown-item" th:href="@{|/tripulante/midocumentacion|}">Mi Documentacion</a> </li>-->
                                    <li> <a class="dropdown-item" th:href="@{|/flybondiers|}"> Flybondiers</a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/infoutiles|}"> Info Utiles </a> </li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item dropdown"  sec:authorize="hasRole('ROLE_ADMINISTRADOR')">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuAdmin" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; border: none; color: #212529">
                                    Administrador
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">


    <!--                                <li> <a class="dropdown-item" th:href="@{|/tripulante/perfil/admin/usuarios|}">Usuarios</a> </li>-->
    <!--                                <li> <a class="dropdown-item" th:href="@{|/tripulante/perfil/admin|}">Ajustes</a></li>-->
                                    <li> <a class="dropdown-item" th:href="@{|/admin/mostrar-noticias|}">Noticias</a></li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item dropdown"  sec:authorize="hasRole('ROLE_OPERACIONES')">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuOperaciones" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; border: none; color: #212529">
                                    Operaciones
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuOperaciones">

                                    <li> <a class="dropdown-item" th:href="@{|/operaciones/pedido-dias-libres|}">Ver pedidos de dias </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/operaciones/periodos|}">Admin Cupos Vacaciones </a> </li>
                                    <li> <a class="dropdown-item"  th:href="@{|/tripulante/operaciones/habilitar-vacaciones|}">Habilitar Vacaciones </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/operaciones/programaciones|}">Ver Programaciones </a> </li>
                                    <li> <a class="dropdown-item"  th:href="@{|/tripulante/perfil/admin/aeropuertos|}">Aeropuertos </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/tripulante/perfil/admin/aviones|}">Aviones </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/operaciones/ver-ausencias|}"> Ver Ausencias </a> </li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item dropdown"  sec:authorize="hasRole('ROLE_LIDER')">
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuLider" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; border: none; color: #212529">
                                    Lider
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLider">



                                    <li> <a class="dropdown-item" th:href="@{|/lider/mostrar-generaciones|}"> Generaciones</a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/mostrarciclosvacaciones|}"> Ciclo Vacaciones</a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/listarPedidos|}"> Pedidos Vacaciones </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/listarAusencias|}"> Pedidos Ausencias </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/mistripulantes|}">Mis tripulantes </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/pedido-dias-libres|}">Pedido Dias Libres </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/mostrar-recurrent|}"> Recurrent </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/consultaruniformes|}"> Uniformes </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/mostrar-noticias|}"> Mis noticias </a> </li>
                                    <li> <a class="dropdown-item" th:href="@{|/lider/ver-ausencias|}"> Ver Ausencias </a> </li>
                                </ul>
                            </div>
                        </li>



                        <li class="nav-item dropdown "  sec:authorize="hasRole('ROLE_TRIPULANTE')">
                            <div class="dropdown ">
                                <button class="btn btn-secondary dropdown-toggle  " type="button"  id="dropdownMenuTripulante" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; border: none; color: #212529">
                                    Tripulante
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuTripulante">


                                    <li><a class="dropdown-item" th:href="@{|/tripulante/librovuelo|}">Mi Libro Vuelo</a>
                                    </li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/midocumentacion|}">Mi Documentacion</a></li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/pedido-vacaciones|}">Mis Pedidos de
                                        vacaciones </a></li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/misvacacionesaprobadas|}">Mis
                                        vacaciones aprobadas </a></li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/mislicencias|}">Mis Licencias </a>
                                    </li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/vestimenta/ver|}">Mi
                                        Vestimenta </a></li>
                                    <li><a class="dropdown-item" th:href="@{|/tripulante/pedido-dias-libres|}">Mis Pedidos
                                        de dias libres</a></li>

                                    <li> <a class="dropdown-item" th:href="@{|/tripulante/ver-ausencias|}"> Ver Ausencias </a> </li>

                                    <li> <a class="dropdown-item" th:href="@{|/tripulante/programacion-tripulantes|}"> Registrar Programaciones </a> </li>
                                </ul>
                            </div>
                        </li>

                        <li class="nav-item">
                            <div class="logout text-decoration-none"></div>
                        </li>
                    </ul>


                    <div class="hstack gap-3 ">
                        <div class="nav-btns">
                            <div class="btn-group">
                                <a th:href="@{|/tripulante/notificaciones|}" type="button"
                                   class="btn nav-btn position-relative">
                                    <i class="bi bi-bell nav-icon"></i>
                                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" th:text="${cantidadNotidicacionesNoLeidas>0} ? ${cantidadNotidicacionesNoLeidas} : ''">
                                        <span class="visually-hidden">New alerts</span>
                                    </span>
                                </a>
                                <a th:href="@{|/chats|}" type="button"
                                   class="btn nav-btn position-relative">
                                    <i class="bi bi-chat-left-dots nav-icon"></i>
                                </a>
    <!--                            <div class="row notification-container dropdown-menu dropdown-menu-end dropdown-menu-lg-start">-->
    <!--                                <div style="width: 14em; height: fit-content">-->
    <!--                                    <div class="card-body">-->
    <!--                                        <h6 class="card-subtitle mb-2 text-muted">Libro vuelo</h6>-->
    <!--                                        <p class="text-sm-start">francisco quiere compartir un libro de vuelo</p>-->
    <!--                                        <a href="#" type="button" class="btn btn-success btn-sm">Aceptar</a>-->
    <!--                                        <a href="#" type="button" class="btn btn-danger btn-sm">Rechazar</a>-->
    <!--                                    </div>-->
    <!--                                </div>-->
    <!--                                <hr class="dropdown-divider">-->
    <!--                                <div style="width: 14em; height: fit-content">-->
    <!--                                    <div class="card-body">-->
    <!--                                        <h6 class="card-subtitle mb-2" style="color: green">Felicitaciones!</h6>-->
    <!--                                        <p class="text-sm-start">tu lider ha aprobado tus vacaciones</p>-->
    <!--                                    </div>-->
    <!--                                </div>-->
    <!--                                <hr class="dropdown-divider">-->
    <!--                                <div style="width: 14em; height: fit-content">-->
    <!--                                    <div class="card-body">-->
    <!--                                        <h6 class="card-subtitle mb-2" style="color: red">Lo sentimos!</h6>-->
    <!--                                        <p class="text-sm-start">Elena ha rechazado tu libro vuelo</p>-->
    <!--                                    </div>-->
    <!--                                </div>-->
    <!--                            </div>-->
                            <a th:href="@{|/tripulante/perfil/datos-personales|}" type="button"
                               class="btn nav-btn position-relative">
                                <i class="bi bi-person-circle nav-icon"></i>
                            </a>
                        </div>
                      </div>
                    </div>

                    <div class="logout mt-4 mt-lg-0" style="width: 80px">
                        <div class="logout-child " sec:authorize="isAuthenticated()">
                            <form id="logoutForm" method="POST" th:action="@{|/logout|}">
                                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                                <a href="#" class="nav-link link-danger text-center text-decoration-none" style="font-size: 14px"
                                   onclick="document.forms['logoutForm'].submit()">Logout</a>
                            </form>
                        </div>
                    </div>
            </div>
        </div>
    </nav>

    <!-- Offcanvas de Admin -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop" aria-labelledby="offcanvasWithBackdropLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBackdropLabel">Navegación Admin</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link link-secondary" th:href="@{|/tripulante/perfil/admin/aeropuertos|}">Aeropuertos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link link-secondary" th:href="@{|/tripulante/perfil/admin/aviones|}">Aviones</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link link-secondary" th:href="@{|/tripulante/perfil/admin/horarios|}">Horarios</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link link-secondary" th:href="@{|/tripulante/perfil/admin/usuarios|}">Usuarios</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link link-secondary" th:href="@{|/tripulante/perfil/admin|}">Ajustes</a>
                </li>
            </ul>
        </div>
    </div>
</div>

<div th:fragment="mistripulantes" th:remove="tag">
    <div class="row mb-5">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <div id="nav-tripulantes">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link nav-tripulantes" th:href="@{|/lider/documentaciones?id=${idABuscar}|}">Documentacion</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-tripulantes" th:href="@{|/lider/vacacionesaprobadas?id=${idABuscar}|}">Vacaciones aprobadas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-tripulantes" th:href="@{|/lider/listarpedidos?id=${idABuscar}|}">Pedidos de vacaciones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-tripulantes" th:href="@{|/lider/vestimenta/ver?id=${idABuscar}|}">Vestimentas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-tripulantes" th:href="@{|/lider/pedidodiaslibres?id=${idABuscar}|}">Pedidos de dias libres</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
</div>

<div th:fragment="nav-profile" th:remove="tag">
    <div class="row mb-5">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <h2><i class="bi bi-book-half me-2 fly-color"></i> Perfil</h2>
            <div id="nav-profile">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/perfil/datos-personales|}">Datos personales</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/perfil/seguridad|}">Seguridad</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/perfil/privacidad|}">Privacidad</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/perfil/contacto|}">Datos de contacto</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/vestimenta/ver|}">Mi vestimenta</a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('ROLE_ADMINISTRADOR')">
                        <a class="nav-link nav-profile" th:href="@{|/tripulante/perfil/admin|}">Admin</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
</div>


<div th:fragment="resumenvacaciones" th:remove="tag">
    <div class="row mt-3" style="width: 60%; margin: auto; display: block;">

        <tr th:each="entry, user : ${mapaVacacionesDeTodosLosUsuarios}">

            <div style="background-color: #ffce3b;border: 1px solid black;color: white; padding: 0.3rem; text-align: center; font-weight: bold">
                <td class="text-center" th:text="${'GENERACIÓN ' + entry.key.getGeneracion().getNumero()}"></td>
            </div>
            <div style="background-color: #ffce3b;border: 1px solid black;color: white; padding: 0.3rem; text-align: center; font-weight: bold">
                <td th:text="${entry.key.getApellido().toUpperCase() + ',' + ' ' + entry.key.getNombre().toUpperCase() + ' ( ' + entry.key.getLegajo()  + ' ) ' }"></td>

            </div>
            <table th:each="entryCiclo, ciclo: ${entry.value}" class="vacaciones">
                <tr>
                    <td th:text="${'Ciclo ' + entryCiclo.key.getNumeroDeCiclo()   +
                        ' de  ' + #temporals.format(entryCiclo.key.getComienzoCiclo(),'yyyy-MM-dd') +
                        ' hasta ' +   #temporals.format(entryCiclo.key.getFinalizacionCiclo(),'yyyy-MM-dd')  }">
                    </td>

                    <table>
                        <tr style="border: 1px solid black; padding: 0.3rem; text-align: center;font-weight: bold;"
                            th:each="listAusencia, ausencia: ${entryCiclo.value}">

                            <td class="ausencia" th:text="${listAusencia.getFechaDesde() == null ? '-' :  #temporals.format(listAusencia.getFechaDesde(),'yyyy-MM-dd') }"/>
                            <!-- + ' | ' + #temporals.format(listAusencia.getFechaHasta(),'yyyy-MM-dd') + ' | ' + listAusencia.getTipoAusencia()  }"></td> -->
                            <td class="ausencia" th:text="${listAusencia.getFechaHasta() == null ? '-' :  #temporals.format(listAusencia.getFechaHasta(),'yyyy-MM-dd') }"/>
                            <td th:text="${listAusencia.getTipoAusencia() == null ? '-' : listAusencia.getTipoAusencia() }"/>
                        </tr>
                    </table>
                </tr>
            </table>
        </tr>
    </div>

</div>

<div th:fragment="foot" th:remove="tag">
    <footer class="d-grid py-2 text-center mt-auto">
        <span class="text-muted justify-content-center">Desarrolladores:</span>
        <span class="text-muted justify-content-center">Jazmin De Stefano - Luca Bernacchia</span>
        <span class="text-muted justify-content-center">German Mazza  - Andres Borgeat</span>
    </footer>
    <!-- Bootstrap 5 Bundle with Popper -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>

</div>
</html>